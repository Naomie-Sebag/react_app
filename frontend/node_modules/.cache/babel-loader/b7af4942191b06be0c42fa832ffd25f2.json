{"ast":null,"code":"import _regeneratorRuntime from\"D:/Users/naomi/Downloads/web_react_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Users/naomi/Downloads/web_react_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:/Users/naomi/Downloads/web_react_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/Users/naomi/Downloads/web_react_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/Users/naomi/Downloads/web_react_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/Users/naomi/Downloads/web_react_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{observer}from'mobx-react';import userStore from'./stores/userStore';import LoginForm from'./stores/LogginForm';import InputField from'./stores/InputField';import SubmitButton from'./stores/SubmitButton';import'./App.css';import React from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){_classCallCheck(this,App);return _super.apply(this,arguments);}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/isLoggedin',{method:'post',headers:{'Accept':'application/json','Content-type':'application/json'}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:result=_context.sent;if(result&&result.success){userStore.loading=false;userStore.isLoggedin=true;userStore.username=result.username;}else{userStore.loading=false;userStore.isLoggedin=false;}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);userStore.loading=false;userStore.isLoggedin=false;case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"doLogout\",value:function(){var _doLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch('/logout',{method:'post',headers:{'Accept':'application/json','Content-Type':'application/json'}});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:result=_context2.sent;if(result&&result.success){userStore.isLoggedin=false;userStore.username='';}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));function doLogout(){return _doLogout.apply(this,arguments);}return doLogout;}()},{key:\"render\",value:function render(){var _this=this;if(userStore.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:\"Loading, please wait...\"})});}else{if(userStore.isLoggedin){return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[\"Welcome \",userStore.username,/*#__PURE__*/_jsx(SubmitButton,{text:'log out',disabled:false,onClick:function onClick(){return _this.doLogout();}})]})});}}return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(SubmitButton,{text:'log out',disabled:false,onClick:function onClick(){return _this.doLogout();}}),/*#__PURE__*/_jsx(\"loginForm\",{})]})});}}]);return App;}(React.Component);export default observer(App);","map":{"version":3,"sources":["D:/Users/naomi/Downloads/web_react_project/src/App.js"],"names":["observer","userStore","LoginForm","InputField","SubmitButton","React","App","fetch","method","headers","res","json","result","success","loading","isLoggedin","username","console","log","doLogout","Component"],"mappings":"m7BAAA,OAASA,QAAT,KAAyB,YAAzB,CAEA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,qBAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,qBAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,uBAAzB,CAGA,MAAO,WAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,2FAIMC,CAAAA,G,+TAEJ,wLAIoBC,CAAAA,KAAK,CAAC,aAAD,CAAgB,CAEnCC,MAAM,CAAE,MAF2B,CAGnCC,OAAO,CAAE,CACP,SAAW,kBADJ,CAEP,eAAiB,kBAFV,CAH0B,CAAhB,CAJzB,QAIQC,GAJR,qCAaqBA,CAAAA,GAAG,CAACC,IAAJ,EAbrB,QAaMC,MAbN,eAeE,GAAGA,MAAM,EAAIA,MAAM,CAACC,OAApB,CAA6B,CAE3BZ,SAAS,CAACa,OAAV,CAAoB,KAApB,CACAb,SAAS,CAACc,UAAV,CAAuB,IAAvB,CACAd,SAAS,CAACe,QAAV,CAAqBJ,MAAM,CAACI,QAA5B,CACD,CALD,IAQA,CACEf,SAAS,CAACa,OAAV,CAAoB,KAApB,CACAb,SAAS,CAACc,UAAV,CAAuB,KAAvB,CACD,CA1BH,iFAkCAd,SAAS,CAACa,OAAV,CAAoB,KAApB,CACAb,SAAS,CAACc,UAAV,CAAuB,KAAvB,CAnCA,qE,sNA2CF,+LAIoBR,CAAAA,KAAK,CAAC,SAAD,CAAY,CAE/BC,MAAM,CAAE,MAFuB,CAG/BC,OAAO,CAAE,CACP,SAAW,kBADJ,CAEP,eAAiB,kBAFV,CAHsB,CAAZ,CAJzB,QAIQC,GAJR,uCAaqBA,CAAAA,GAAG,CAACC,IAAJ,EAbrB,QAaMC,MAbN,gBAeE,GAAGA,MAAM,EAAIA,MAAM,CAACC,OAApB,CAA6B,CAE3BZ,SAAS,CAACc,UAAV,CAAuB,KAAvB,CACAd,SAAS,CAACe,QAAV,CAAqB,EAArB,CACD,CAnBH,qFAyBAC,OAAO,CAACC,GAAR,eAzBA,uE,wGAgCE,iBACA,gBAEE,GAAGjB,SAAS,CAACa,OAAb,CAAsB,CACpB,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,WAAf,qCADF,EADF,CAOD,CARD,IAUK,CAEH,GAAGb,SAAS,CAACc,UAAb,CAAyB,CAEvB,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,aAAK,SAAS,CAAC,WAAf,sBACSd,SAAS,CAACe,QADnB,cAGA,KAAC,YAAD,EACA,IAAI,CAAE,SADN,CAEA,QAAQ,CAAE,KAFV,CAGA,OAAO,CAAG,yBAAM,CAAA,KAAI,CAACG,QAAL,EAAN,EAHV,EAHA,GADF,EADF,CAeF,CAED,CAED,mBACE,YAAK,SAAS,CAAC,KAAf,uBACG,aAAK,SAAS,CAAC,WAAf,wBACK,KAAC,YAAD,EACI,IAAI,CAAE,SADV,CAEI,QAAQ,CAAE,KAFd,CAGI,OAAO,CAAG,yBAAM,CAAA,KAAI,CAACA,QAAL,EAAN,EAHd,EADL,cAOE,oBAPF,GADH,EADF,CAaC,C,iBA9Had,KAAK,CAACe,S,EAmIxB,cAAepB,CAAAA,QAAQ,CAACM,GAAD,CAAvB","sourcesContent":["import { observer } from 'mobx-react';\n\nimport userStore from './stores/userStore';\nimport LoginForm from './stores/LogginForm';\nimport InputField from './stores/InputField';\nimport SubmitButton from './stores/SubmitButton';\n\n\nimport './App.css';\nimport React from 'react';\n\n\n\nclass App extends React.Component {\n\n  async componentDidMount(){\n\n    try {\n\n      let res = await fetch('/isLoggedin', {\n\n        method: 'post',\n        headers: {\n          'Accept' : 'application/json',\n          'Content-type' : 'application/json'\n        }\n      });\n\n    let result = await res.json();\n\n    if(result && result.success) {\n\n      userStore.loading = false;\n      userStore.isLoggedin = true;\n      userStore.username = result.username;\n    }\n\n    else\n    {\n      userStore.loading = false;\n      userStore.isLoggedin = false;\n    }\n\n\n\n    }\n\ncatch(e) {\n\n  userStore.loading = false;\n  userStore.isLoggedin = false;\n  }\n\n}\n\n\n\n\nasync doLogout(){\n\n  try {\n\n    let res = await fetch('/logout', {\n\n      method: 'post',\n      headers: {\n        'Accept' : 'application/json',\n        'Content-Type' : 'application/json'\n      }\n    });\n\n  let result = await res.json();\n\n  if(result && result.success) {\n\n    userStore.isLoggedin = false;\n    userStore.username = '';\n  }\n\n  }\n\ncatch(e) {\n\nconsole.log(e)\n}\n\n}\n\n\n\n  render()\n  {\n\n    if(userStore.loading) {\n      return (\n        <div className='app'>\n          <div className='container'>\n          Loading, please wait...\n          </div>\n        </div>\n      );\n    }\n\n    else {\n\n      if(userStore.isLoggedin) {\n\n        return (\n          <div className='app'>\n            <div className='container'>\n            Welcome {userStore.username}\n\n            <SubmitButton\n            text={'log out'}\n            disabled={false}\n            onClick={ () => this.doLogout()}\n            \n            />\n\n            </div>\n          </div>\n        );\n     }\n      \n    }\n\n    return (\n      <div className=\"app\">\n         <div className='container'>\n              <SubmitButton\n                  text={'log out'}\n                  disabled={false}\n                  onClick={ () => this.doLogout()}\n                  \n                  />\n           <loginForm />\n           </div>\n      </div>\n    );  \n    }\n\n    \n}\n\nexport default observer(App);\n"]},"metadata":{},"sourceType":"module"}